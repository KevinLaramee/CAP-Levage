<odoo>
    <data>

<<<<<<< HEAD
        <template id="assets_backend" name="im assets" inherit_id="web.assets_backend">
            <xpath expr="." position="inside">
                <script>
                    //alert('test');
                    $( document ).ready(function() {
                        //alert('test2');
                        $('.o_searchview_input').val('01');
                        $('.o_searchview_input').change();
                    });
                </script>
                <script type="text/javascript" src="/certification/static/src/js/back_office/equipment_list.js"></script>
=======
        <template id="assets_backend_portal" name="im assets" inherit_id="web.assets_backend">
            <xpath expr="." position="inside">
                <link rel='stylesheet' type="text/css" href='/certification/static/src/css/backoffice.css'/>
                <link rel="stylesheet" href="/certification/static/src/css/popup_webcam_equipment.css"/>
                <link rel="stylesheet" href="/certification/static/src/css/nfc.css"/>
>>>>>>> origin/Lucas
            </xpath>
        </template>

        <!-- Page d'accueil d'un questionnaire -->
        <template id="accueil_questionnaire_audit" name="Accueil Questionnaire Audit">
            <t t-call="website.layout">
                <div class="container">
                    <div class='jumbotron mt32'>
                        <h1 t-field="audit.questionnaire.nom"/>
                        <a class="btn btn-primary btn-lg"
                           t-att-href="'/audit/completer_questionnaire/%s/%s' % (slug(audit), id_client)">
                            Débuter le questionnaire
                        </a>
                    </div>
                </div>
            </t>
        </template>

        <!-- Un questionnaire -->
        <template id="questionnaire" name="Questionnaire">
            <t t-call="website.layout">
                <div class="container">
                    <t t-call="certification.regroupement"/>
                </div>
            </t>
        </template>

        <!-- Un regroupement -->
        <template id="regroupement" name="Regroupement">
            <div class="page-header">
                <p class="pull-right">
                    Page <span t-raw="regroupement_nr + 1"/> sur <span t-raw="len(audit.questionnaire.ids_regroupement)"/>
                </p>
                <h1 t-field="regroupement.nom"/>
            </div>

            <form role="form" method="post" t-att-name="'%s_%s' % (audit.questionnaire.id, regroupement.id)"
                  t-att-action="'/audit/soumettre_reponses/%s/%s' % (slug(audit), id_client)">
                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                <input type="hidden" name="id_regroupement" t-att-value="regroupement.id" />
                <t t-foreach="regroupement.ids_question" t-as="question">
                    <t t-set="prefix" t-value="'%s_%s_%s' % (audit.questionnaire.id, regroupement.id, question.id)"/>
                    <t t-set="commentaire" t-value="'%s_com' % (prefix)"/>
                    <div t-att-id="prefix">
                        <h2>
                            <span t-field="question.question"/>
                            <!--<span class="text-danger">*</span>-->
                        </h2>
                        <group class="radio">
                            <input type="radio" t-att-name="prefix" t-att-value="1">Oui</input>
                            <br/>
                            <input type="radio" t-att-name="prefix" t-att-value="2">Non</input>
                        </group>
                        <group>
                            <label>Commentaire:</label>
                            <br/>
                            <textarea t-att-name="commentaire" cols="150" rows="3"/>
                        </group>
                    </div>
                <br/>
                </t>
                <!--<p><span class="text-danger">*</span> Signifie que la réponse à cette question est obligatoire</p>-->
                <label>Observation générale:</label>
                <br/>
                <textarea t-if="last" name="observ_gene" cols="150" rows="3"/>
                <div class="text-center mt16 mb16">
                    <button t-if="not last" type="submit" class="btn btn-primary" name="button_submit_suivant" value="suivant">
                        Page suivante
                    </button>
                    <button t-if="last" type="submit" class="btn btn-success" name="button_submit_valide" value="valide">
                        Certification validée
                    </button>
                    <button t-if="last" type="submit" class="btn btn-warning" name="button_submit_reparation" value="reparation">
                        Devis réparation
                    </button>
                    <button t-if="last" type="submit" class="btn btn-danger" name="button_submit_reforme" value="reforme">
                        Matériel réformé
                    </button>
                </div>
            </form>
        </template>

        <!-- Page indiquant la fin d'un questionnaire -->
       <!--<template id="questionnaire_termine" name="Questionnaire terminé">
            <t t-call="website.layout">
                <div class="container">
                    <div class="jumbotron mt32">
                        <h1>Merci !</h1>
                        <p>Le questionnaire de cet audit a été rempli.</p>
                        <p>Vous pouvez,
                            <a t-att-href="'/audit/reponses_questionnaire/%s/%s/0' % (slug(audit), id_client)">
                                consulter les réponses données à ce questionnaire
                            </a>
                        </p>
                    </div>
                </div>
            </t>
        </template>-->

        <!-- Page affichant les réponses données au questionnaire pour cet audit -->
        <template id="reponses_questionnaire" name="Réponses">
            <t t-call="website.layout">
                <div class="container">
                    <div class="jumbotron mt32">
                        <h1>Vos réponses au questionnaire "<span t-field="audit.questionnaire.nom"/>"</h1>
                    </div>
                    <p class="pull-right">
                        Page <span t-raw="num_regroupement + 1"/> sur <span t-raw="len(audit.questionnaire.ids_regroupement)"/>
                    </p>
                    <div role="form" t-att-name="'%s' % (audit.questionnaire.id)">
                        <div class="tete-page">
                            <h1 t-field="regroupement_affiche.nom"/>
                        </div>
                        <t t-foreach="reponses.ids_ligne_saisie_utilisateur" t-as="reponse">
                            <t t-set="prefix" t-value="'%s_%s_%s' % (audit.questionnaire.id, regroupement_affiche.id, reponse.id_question.id)"/>
                            <div t-att-id="prefix">
                                <h2>
                                    <span t-field="reponse.id_question.question"/>
                                    <span class="text-danger">*</span>
                                </h2>
                                <div class="Icone">
                                    <div>
                                        <t t-if="reponse.reponse == 1">
                                            <img src="/certification/static/src/img/sign-check-icon.png" alt="Icône valide"
                                                 width="40px"/>
                                        </t>
                                        <t t-elif="reponse.reponse == 2">
                                            <img src="/certification/static/src/img/sign-error-icon.png" alt="Icône erreur"
                                                 width="40px"/>
                                        </t>
                                        <t t-else="">
                                            <p>Non répondue</p>
                                        </t>
                                    </div>
                                    <div t-if="reponse.commentaire" class="commentaire">
                                        <label>Commentaire:</label>
                                        <p><t t-esc="reponse.commentaire"/></p>
                                    </div>
                                </div>
                                <hr/>
                            </div>
                            <br/>
                        </t>
                        <separator/>
                        <p t-if="regroupement_precedent or regroupement_precedent == 0">
                            Etat de l'équipement à la fin du questionnaire: <t t-esc="audit.etat_equipment_fin"/>
                        </p>
                    </div>
                    <div class="text-center mt16 mb16">
                        <a t-if="regroupement_precedent or regroupement_precedent == 0"
                                t-att-href="'/audit/reponses_questionnaire/%s/%s/%s' %
                                                (slug(audit), id_client, regroupement_precedent)"
                                class="btn btn-primary" name="precedent">Page précédente</a>
                        <a t-if="regroupement_suivant"
                                t-att-href="'/audit/reponses_questionnaire/%s/%s/%s' %
                                                (slug(audit), id_client, regroupement_suivant)"
                                class="btn btn-primary" name="suivant">Page suivante</a>
                        <a t-att-href="'/web#home'"
                           class="btn btn-primary" name="retour">Retour au menu odoo</a>
                    </div>
                </div>
            </t>
        </template>

        <template id="report_certificat_conforme">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                        <div class="page">
                            <div class="tableau-infos">
                                <table style="border: 1px solid; width: 100%;">
                                    <tr>
                                        <th style="border: 1px solid; width: 50%; padding: 5px;"><b>DESTINATAIRE</b></th>
                                        <th style="border: 1px solid; width: 50%; padding: 5px;"><b>INFORMATIONS</b></th>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid; padding: 5px;">
                                            <t t-esc="o.client.name"/>
                                            <br/>
                                            <t t-esc="o.client.street"/>
                                            <br/>
                                            <t t-esc="o.client.zip"/> <t t-esc="o.client.city"/>
                                        </td>
                                        <td style="border: 1px solid; padding: 5px;">
                                            <p><b>DATE DE CONTRÔLE: </b><t t-esc="o.date" t-options="{'widget': 'date'}"/></p>
                                            <p><b>COMMANDE: </b><t t-esc="o.commande.name"/></p>
                                            <p><b>BON DE LIVRAISON N°: </b></p>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div class="corp-certif" style="text-align: center;">
                                <h2 style="padding: 50px"><b><u><i>DÉCLARATION DE CONFORMITE</i></u></b></h2>
                                <h4 style="border: 1px solid; padding: 5px;"><b>NOMBRES DE CONTRÔLES EFFECTUÉS: </b></h4>
                                <p>
                                    <i>
                                        Selon Directive 89:392/CEE, modifiée par 91/368, 93/94 et 93/68
                                        Nous, soussignés, CAP LEVAGE, certifions que le matériel ci-après est conforme:
                                    </i>
                                </p>
                                <p style="border: 1px solid; padding: 5px;">
                                    <i>
                                        <t t-esc="o.equipement.name"/> POUR L'ANNÉE xxxx
                                        IDENTIFIÉS VIA DES EASY CLIPS DE COULEUR xxxx
                                    </i>
                                </p>
                            </div>
                            <footer>
                                <p style="text-align: right;"><b>REPONSABLE</b></p>
                            </footer>
                        </div>
                    </t>
                </t>
            </t>
        </template>

		<report
            id="custom_template_1"
            model="critt.certification.audit"
            string="Certificat conforme"
            report_type="qweb-pdf"
            name="certification.report_certificat_conforme"
            file="certification.report_certificat_conforme"
            menu="False"
        />

        <template id="report_certificat_reforme">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                        <div class="page">
                            <div class="tableau-infos">
                                <table style="border: 1px solid; width: 100%;">
                                    <tr>
                                        <th style="border: 1px solid; width: 50%; padding: 5px;"><b>DESTINATAIRE</b></th>
                                        <th style="border: 1px solid; width: 50%; padding: 5px;"><b>INFORMATIONS</b></th>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid; padding: 5px;">
                                            <t t-esc="o.client.name"/>
                                            <br/>
                                            <t t-esc="o.client.street"/>
                                            <br/>
                                            <t t-esc="o.client.zip"/> <t t-esc="o.client.city"/>
                                        </td>
                                        <td style="border: 1px solid; padding: 5px;">
                                            <p><b>DATE DE CONTRÔLE: </b><t t-esc="o.date" t-options="{'widget': 'date'}"/></p>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div class="corp-certif" style="text-align: center;">
                                <h2 style="padding: 50px"><b><u><i>DÉCLARATION DE RÉFORME</i></u></b></h2>
                            </div>
                            <footer>
                                <p style="text-align: right;"><b>REPONSABLE</b></p>
                            </footer>
                        </div>
                    </t>
                </t>
            </t>
        </template>

        <report
            id="custom_template_2"
            model="critt.certification.audit"
            string="Certificat reforme"
            report_type="qweb-pdf"
            name="certification.report_certificat_reforme"
            file="certification.report_certificat_reforme"
            menu="False"
        />

        <template id="report_controle">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                        <div class="page">
                            <header>
                                <p style="text-align: right;"><b>Contrôleur</b></p>
                            </header>
                            <separator/>
                            <body>
                                <h1 style="text-align: center;"><b>Résultats du diagnostic</b></h1>
                                <h2 style="text-align: left;"><i>Infos matériel</i></h2>
                                <div class="infos_materiel">
                                    <p><b>Numéro: </b></p>
                                    <p><b>Type: </b></p>
                                    <p><b>Fabricant: </b></p>
                                    <p><b>CMU: </b></p>
                                    <p><b>Date de fabrication: </b></p>
                                    <p><b>Date du dernier contrôle:</b></p>
                                    <p><b>Etat: </b></p>
                                </div>
                                <p>photo</p>
                                <separator/>
                                <div class="diagnostic">
                                    <div class="question">
                                        <div class="corps">

                                        </div>
                                        <div class="commentaire">

                                        </div>
                                    </div>
                                    <div class="observation_generale">
                                        <textarea cols="150" rows="3"></textarea>
                                    </div>
                                </div>
                            </body>
                            <separator/>
                            <footer>
                                <p style="text-align: left;"><b>Contrôleur</b></p>
                                <p style="text-align: center;"><b>Date</b></p>
                                <p style="text-align: right;"><b>Signature</b></p>
                            </footer>
                        </div>
                    </t>
                </t>
            </t>
        </template>

        <report
            id="custom_template_3"
            model="critt.certification.audit"
            string="Rapport de contrôle"
            report_type="qweb-pdf"
            name="certification.report_controle"
            file="certification.report_controle"
            menu="False"
        />

    </data>
</odoo>