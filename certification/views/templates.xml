<odoo>
    <data>

        <template id="assets_backend_portal" name="im assets" inherit_id="web.assets_backend">
            <xpath expr="." position="inside">
            	<link rel='stylesheet' type="text/css" href='/certification/static/src/css/backoffice.css'/>
                <link rel="stylesheet" href="/certification/static/src/css/popup_webcam_equipment.css"/>
<!--                <link rel="stylesheet" href="/certification/static/src/css/nfc.css"/>-->
                <script>
                    //alert('test');
                    $( document ).ready(function() {
                        //alert('test2');
                        $('.o_searchview_input').val('01');
                        $('.o_searchview_input').change();

                    });
                </script>
                <script type="text/javascript" src="/certification/static/src/js/back_office/list_equipment_button_nfc.js"></script>
                <script type="text/javascript" src="/certification/static/src/js/back_office/web_tree_dynamic_colored_field.js"></script>
                <script type="text/javascript" src="/certification/static/src/js/back_office/equipment_list.js"></script>
            </xpath>
        </template>

        <!-- Essai dépassé -->
        <template id="essai_depasse" name="Essai dépassé">
            <t t-call="website.layout">
                <div class="o_portal_my_purchases panel row">
                    <div class="container">
                        <h1>Période d'essai terminée</h1>
                    </div>
                </div>
            </t>
        </template>

        <!-- Page d'accueil d'un questionnaire -->
        <!--<template id="accueil_questionnaire_audit" name="Accueil Questionnaire Audit">
            <t t-call="website.layout">
                <div class="container">
                    <div class='jumbotron mt32'>
                        <h1 t-field="audit.questionnaire.nom"/>
                        <a class="btn btn-primary btn-lg"
                           t-att-href="'/audit/completer_questionnaire/%s/%s' % (slug(audit), id_client)">
                            Débuter le questionnaire
                        </a>
                    </div>
                </div>
            </t>
        </template>-->

        <!-- Un questionnaire -->
        <template id="questionnaire" name="Questionnaire">
            <t t-call="website.layout">
                <div class="o_portal_my_purchases panel row">
                    <div class="container">
                        <t t-call="certification.regroupement"/>
                    </div>
                </div>
            </t>
        </template>

        <!-- Un regroupement -->
        <template id="regroupement" name="Regroupement">
            <div class="page-header">
                <p class="pull-right">
                    Page <span t-raw="regroupement_nr + 1"/> sur <span t-raw="len(audit.questionnaire.ids_regroupement)"/>
                </p>
                <h1 t-field="regroupement.nom"/>
            </div>

            <form role="form" method="post" t-att-name="'%s_%s' % (audit.questionnaire.id, regroupement.id)"
                  t-att-action="'/audit/soumettre_reponses/%s/%s' % (slug(audit), id_client)">
                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                <input type="hidden" name="id_regroupement" t-att-value="regroupement.id" />
                <t t-foreach="regroupement.ids_question" t-as="question">
                    <t t-set="prefix" t-value="'%s_%s_%s' % (audit.questionnaire.id, regroupement.id, question.id)"/>
                    <t t-set="commentaire" t-value="'%s_com' % (prefix)"/>
                    <div t-att-id="prefix">
                        <h2>
                            <span t-field="question.question"/>
                            <!--<span class="text-danger">*</span>-->
                        </h2>
                        <group class="radio col-xs-12">
                            <input type="radio" t-att-name="prefix" t-att-value="1" checked="1">Oui</input>
                            <br/>
                            <input type="radio" t-att-name="prefix" t-att-value="2">Non</input>
                            <br/>
                            <input type="radio" t-att-name="prefix" t-att-value="3">Pas de réponse</input>
                            <br/>
                        </group>
                        <group>
                            <label>Commentaire:</label>
                            <br/>
                            <textarea style="margin-bottom: 20px;" class="col-xs-12" t-att-name="commentaire" cols="150" rows="3"/>
                        </group>
                    </div>
                <br/>
                </t>
                <!--<p><span class="text-danger">*</span> Signifie que la réponse à cette question est obligatoire</p>-->
                <label t-if="last">Observation générale:</label>
                <br/>
                <textarea t-if="last" name="observ_gene" cols="150" rows="3"/>
                <div class="text-center mt16 mb16">
                    <button t-if="not last" type="submit" class="btn btn-primary" name="button_submit_suivant" value="suivant">
                        Page suivante
                    </button>
                    <button t-if="last" type="submit" class="btn btn-success questionnaire_bon" name="button_submit_valide" value="valide">
                        Certification validée
                    </button>
                    <button t-if="last" type="submit" class="btn btn-danger questionnaire_bloque" name="button_submit_reparation" value="reparation">
                        Devis réparation
                    </button>
                    <button t-if="last" type="submit" class="btn btn-dark questionnaire_reforme" name="button_submit_reforme" value="reforme">
                        Matériel réformé
                    </button>
                </div>
            </form>
        </template>

        <!-- Page indiquant la fin d'un questionnaire -->
       <!--<template id="questionnaire_termine" name="Questionnaire terminé">
            <t t-call="website.layout">
                <div class="container">
                    <div class="jumbotron mt32">
                        <h1>Merci !</h1>
                        <p>Le questionnaire de cet audit a été rempli.</p>
                        <p>Vous pouvez,
                            <a t-att-href="'/audit/reponses_questionnaire/%s/%s/0' % (slug(audit), id_client)">
                                consulter les réponses données à ce questionnaire
                            </a>
                        </p>
                    </div>
                </div>
            </t>
        </template>-->

        <!-- Page affichant les réponses données au questionnaire pour cet audit -->
        <template id="reponses_questionnaire" name="Réponses">
            <t t-call="website.layout">
                <link href="/certification/static/src/css/templates.css" rel="stylesheet" type="text/css"/>
                <div class="container">
                    <div class="jumbotron mt32">
                        <h1>Vos réponses au questionnaire "<span t-field="audit.questionnaire.nom"/>"</h1>
                    </div>
                    <p class="pull-right">
                        Page <span t-raw="num_regroupement + 1"/> sur <span t-raw="len(audit.questionnaire.ids_regroupement)"/>
                    </p>
                    <div role="form" t-att-name="'%s' % (audit.questionnaire.id)">
                        <div class="tete-page">
                            <h1 t-field="regroupement_affiche.nom"/>
                        </div>
                        <t t-foreach="lignes_reponses" t-as="reponse">
                            <t t-set="prefix" t-value="'%s_%s_%s' % (audit.questionnaire.id, regroupement_affiche.id, reponse.id_question.id)"/>
                            <div t-att-id="prefix">
                                <h2>
                                    <span t-field="reponse.id_question.question"/>
                                </h2>
                                <div class="icone row col-12">
                                    <div class="col-6">
                                        <t t-if="reponse.reponse == 1">
                                            <span>Oui</span> <span class="reponse-icon oui"></span>
                                            <span>Non</span> <span class="reponse-icon"></span>
                                            <!--<img src="/certification/static/src/img/sign-check-icon.png" alt="Icône valide"
                                                 width="40px"/>-->
                                        </t>
                                        <t t-elif="reponse.reponse == 2">
                                            <span>Oui</span> <span class="reponse-icon"></span>
                                            <span>Non</span> <span class="reponse-icon non"></span>
                                            <!--<img src="/certification/static/src/img/sign-error-icon.png" alt="Icône erreur"
                                                 width="40px"/>-->
                                        </t>
                                        <t t-else="">
                                            <span>Oui</span> <span class="reponse-icon"></span>
                                            <span>Non</span> <span class="reponse-icon"></span>
                                        </t>
                                    </div>
                                    <div t-if="reponse.commentaire" class="commentaire col-6">
                                        <label>Commentaire:</label>
                                        <p><t t-esc="reponse.commentaire"/></p>
                                    </div>
                                </div>
                                <hr/>
                            </div>
                            <br/>
                        </t>
                        <separator/>
                        <p t-if="regroupement_precedent or regroupement_precedent == 0">
                            <b>Etat de l'équipement à la fin du questionnaire: </b><t t-esc="audit.etat_equipment_fin"/>

                        </p>
                    </div>
                    <div class="text-center mt16 mb16">
                        <a t-if="regroupement_precedent or regroupement_precedent == 0"
                                t-att-href="'/audit/reponses_questionnaire/%s/%s/%s' %
                                                (slug(audit), id_client, regroupement_precedent)"
                                class="btn btn-primary" name="precedent">Page précédente</a>
                        <a t-if="regroupement_suivant"
                                t-att-href="'/audit/reponses_questionnaire/%s/%s/%s' %
                                                (slug(audit), id_client, regroupement_suivant)"
                                class="btn btn-primary" name="suivant">Page suivante</a>
                        <a t-att-href="'/web#model=critt.certification.audit&amp;view_type=list'"
                           class="btn btn-primary" name="retour">Retour à la liste des contrôles</a>
                    </div>
                </div>
            </t>
        </template>

        <template id="report_list_equipment">
            <t t-call="web.html_container">
                <t t-call="web.external_layout">
                    <div class="page">
                        <table style="border: 1px solid;">
                            <tr>
                                <th style="border: 1px solid; padding: 5px;"><b>Client</b></th>
                                <th style="border: 1px solid; padding: 5px;"><b>Numéro gravé</b></th>
                                <th style="border: 1px solid; padding: 5px;"><b>Type</b></th>
                                <th style="border: 1px solid; padding: 5px;"><b>Date prochain contrôle</b></th>
                            </tr>
                            <t t-foreach="docs" t-as="o">
                                <tr>
                                    <td style="border: 1px solid; padding: 5px;">
                                        <t t-esc="o.res_partner_id.name"/>
                                    </td>
                                    <td style="border: 1px solid; padding: 5px;">
                                        <t t-esc="o.num_materiel"/>
                                    </td>
                                    <td style="border: 1px solid; padding: 5px;">
                                        <t t-esc="o.category_id.name"/>
                                    </td>
                                    <td style="border: 1px solid; padding: 5px;">
                                        <t t-esc="o.audit_suivant"  t-options="{'widget': 'date'}"/>
                                    </td>
                                </tr>
                            </t>
                        </table>
                    </div>
                </t>
            </t>
        </template>

        <template id="report_last_certificat_conforme">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                        <link href="/certification/static/src/css/templates.css" rel="stylesheet" type="text/css"/>
                        <div class="page">
                            <t t-if="o.date_dernier_audit">
                                <div class="tableau-infos" style=" padding-top: 50px">
                                    <table style="border: 1px solid;">
                                        <tr>
                                            <th style="border: 1px solid; width: 50%; padding: 5px;"><b>DESTINATAIRE</b></th>
                                            <th style="border: 1px solid; width: 50%; padding: 5px;"><b>INFORMATIONS</b></th>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid; padding: 5px;">
                                                <t t-esc="o.res_partner_id.name"/>
                                                <br/>
                                                <t t-esc="o.res_partner_id.street"/>
                                                <t t-if="o.res_partner_id.street2">
                                                    <br/>
                                                    <t t-esc="o.res_partner_id.street2"/>
                                                </t>
                                                <br/>
                                                <t t-esc="o.res_partner_id.zip"/> <t t-esc="o.res_partner_id.city"/>
                                            </td>
                                            <td style="border: 1px solid; padding: 5px;">
                                                <p>
                                                    <b>DATE DERNIER AUDIT: </b><t t-esc="o.date_dernier_audit" t-options="{'widget': 'date'}"/>
                                                    <br/>
                                                    <b>DATE PROCHAIN AUDIT: </b><t t-esc="o.audit_suivant" t-options="{'widget': 'date'}"/>
                                                    <!--<b>DATE DE CONTRÔLE: </b><t t-esc="o.date" t-options="{'widget': 'date'}"/>
                                                    <br/>
                                                    <b>COMMANDE CLIENT N°: </b>
                                                    <br/>
                                                    <b>BON DE LIVRAISON N°: </b>-->
                                                </p>
                                            </td>
                                        </tr>
                                    </table>
                                    <br/>
                                </div>
                                <div class="corp-certif" style="text-align: center;">
                                    <h2 style="margin: 50px; text-align: center;"><u>DÉCLARATION DE CONFORMITÉ</u></h2>
                                    <p style="margin: 50px;">
                                            Selon Directive 89:392/CEE, modifiée par 91/368, 93/94 et 93/68
                                            <br/>
                                            <br/>
                                            Nous, soussignés, CAP LEVAGE, certifions que le matériel est conforme jusqu'à la date du prochain audit
                                    </p>
                                    <table class="infos_mat">
                                        <tr>
                                            <td style="border: 1px solid; padding: 5px;"><b>Type de matériel</b></td>
                                            <td><t t-esc="o.category_id.name"/></td>
                                        </tr>
                                        <tr>
                                            <td><b>Numéro de matériel</b></td>
                                            <td><t t-esc="o.num_materiel"/></td>
                                        </tr>
                                        <tr>
                                            <td><b>Date de mise en service</b></td>
                                            <td><t t-esc="o.an_mise_service" t-options="{'widget': 'date'}"/></td>
                                        </tr>
                                        <tr>
                                            <td><b>Fabricant</b></td>
                                            <td><t t-esc="o.fabricant_id.name"/></td>
                                        </tr>
                                        <tr>
                                            <td><b>Cœfficient de Sécurité</b></td>
                                            <td><t t-esc="o.category_id.coef_secu"/></td>
                                        </tr>
                                        <tr t-if="o.display_cmu">
                                            <td><b>CMU (T)</b></td>
                                            <td><t t-esc="o.cmu"/></td>
                                        </tr>
                                        <tr t-if="o.display_tmu">
                                            <td><b>TMU (daN)</b></td>
                                            <td><t t-esc="o.tmu"/></td>
                                        </tr>
                                        <tr t-if="o.display_nombre_brins">
                                            <td><b>Nombre de brins</b></td>
                                            <td><t t-esc="o.nombre_brins"/></td>
                                        </tr>
                                        <tr t-if="o.display_longueur">
                                            <td><b>Longueur (m)</b></td>
                                            <td><t t-esc="o.longueur"/></td>
                                        </tr>
                                    </table>
                                </div>
                                <footer>
                                    <div style="margin-top: 50px;text-align:right;">
                                        <div style="font-weight:bold;">LE RESPONSABLE</div>
                                        <div style="font-weight:bold;">Laramée Kévin</div>
                                        <div>
                                            <img src="/certification/static/src/img/Signature.PNG" style="height: 90px; width: 210px;"/>
                                        </div>
                                    </div>
                                </footer>
                            </t>
                            <t t-else="">
                                <h3 style="text-align: center;">Le matériel numéro <t t-esc="o.num_materiel"/> ne possède pas de cercitifat de conformité</h3>
                            </t>
                        </div>
                    </t>
                </t>
            </t>
        </template>

        <template id="report_certificat_conforme">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                        <link href="/certification/static/src/css/templates.css" rel="stylesheet" type="text/css"/>
                        <div class="page">
                            <t t-if="o.certif_conforme">
                                <div class="tableau-infos" style=" padding-top: 50px">
                                    <table style="border: 1px solid;">
                                        <tr>
                                            <th style="border: 1px solid; width: 50%; padding: 5px;"><b>DESTINATAIRE</b></th>
                                            <th style="border: 1px solid; width: 50%; padding: 5px;"><b>INFORMATIONS</b></th>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid; padding: 5px;">
                                                <t t-esc="o.equipement.res_partner_id.name"/>
                                                <br/>
                                                <t t-esc="o.equipement.res_partner_id.street"/>
                                                <t t-if="o.equipement.res_partner_id.street2">
                                                    <br/>
                                                    <t t-esc="o.equipement.res_partner_id.street2"/>
                                                </t>
                                                <br/>
                                                <t t-esc="o.equipement.res_partner_id.zip"/> <t t-esc="o.equipement.res_partner_id.city"/>
                                            </td>
                                            <td style="border: 1px solid; padding: 5px;">
                                                <p>
                                                    <b>DATE DERNIER AUDIT: </b><t t-esc="o.date" t-options="{'widget': 'date'}"/>
                                                    <br/>
                                                    <b>DATE PROCHAIN AUDIT: </b><t t-esc="o.e_date_pro" t-options="{'widget': 'date'}"/>
                                                    <!--<b>DATE DE CONTRÔLE: </b><t t-esc="o.date" t-options="{'widget': 'date'}"/>
                                                    <br/>
                                                    <b>COMMANDE CLIENT N°: </b>
                                                    <br/>
                                                    <b>BON DE LIVRAISON N°: </b>-->
                                                </p>
                                            </td>
                                        </tr>
                                    </table>
                                    <br/>
                                </div>
                                <div class="corp-certif" style="text-align: center;">
                                    <h2 style="margin: 50px; text-align: center;"><u>DÉCLARATION DE CONFORMITÉ</u></h2>
                                    <p style="margin: 50px;">
                                            Selon Directive 89:392/CEE, modifiée par 91/368, 93/94 et 93/68
                                            <br/>
                                            <br/>
                                            Nous, soussignés, CAP LEVAGE, certifions que le matériel est conforme jusqu'à la date du prochain audit
                                    </p>
                                    <table class="infos_mat">
                                        <tr>
                                            <td style="border: 1px solid;"><b>Type de matériel</b></td>
                                            <td><t t-esc="o.e_type"/></td>
                                        </tr>
                                        <!--<tr t-if="o.display_model">
                                            <td><b>Modèle</b></td>
                                            <td><t t-esc="o.e_model"/></td>
                                        </tr>-->
                                        <tr>
                                            <td><b>Numéro de matériel</b></td>
                                            <td><t t-esc="o.e_num"/></td>
                                        </tr>
                                        <tr>
                                            <td><b>Date de mise en service</b></td>
                                            <td><t t-esc="o.e_an_mise_serv" t-options="{'widget': 'date'}"/></td>
                                        </tr>
                                        <tr>
                                            <td><b>Fabricant</b></td>
                                            <td><t t-esc="o.e_fab"/></td>
                                        </tr>
                                        <tr>
                                            <td><b>Cœfficient de Sécurité</b></td>
                                            <td><t t-esc="o.e_coef_secu"/></td>
                                        </tr>
                                        <tr t-if="o.equipement.display_cmu">
                                            <td><b>CMU (T)</b></td>
                                            <td><t t-esc="o.e_cmu"/></td>
                                        </tr>
                                        <tr t-if="o.equipement.display_tmu">
                                            <td><b>TMU (daN)</b></td>
                                            <td><t t-esc="o.e_tmu"/></td>
                                        </tr>
                                        <tr t-if="o.equipement.display_nombre_brins">
                                            <td><b>Nombre de brins</b></td>
                                            <td><t t-esc="o.e_nb_brins"/></td>
                                        </tr>
                                        <tr t-if="o.equipement.display_longueur">
                                            <td><b>Longueur (ml)</b></td>
                                            <td><t t-esc="o.e_long"/></td>
                                        </tr>
                                        <tr t-if="o.equipement.display_diametre">
                                            <td><b>Diamètre (mm)</b></td>
                                            <td><t t-esc="o.e_diametre"/></td>
                                        </tr>
                                        <tr t-if="o.equipement.display_grade">
                                            <td><b>Grade</b></td>
                                            <td><t t-esc="o.e_grade"/></td>
                                        </tr>
                                        <tr t-if="o.equipement.display_num_lot">
                                            <td><b>Numéro de lot</b></td>
                                            <td><t t-esc="o.e_num_lot"/></td>
                                        </tr>
                                        <tr t-if="o.equipement.display_num_commande">
                                            <td><b>Numéro de commande</b></td>
                                            <td><t t-esc="o.e_num_commande"/></td>
                                        </tr>
                                    </table>
                                </div>
                                <footer>
                                    <div style="margin-top: 50px;text-align:right;">
                                        <div style="font-weight:bold;">LE RESPONSABLE</div>
                                        <div style="font-weight:bold;">Laramée Kévin</div>
                                        <div>
                                            <img src="/certification/static/src/img/Signature.PNG" style="height: 90px; width: 210px;"/>
                                        </div>
                                    </div>
                                </footer>
                            </t>
                            <t t-else="">
                                <h3 style="text-align: center;">Le matériel numéro <t t-esc="o.num_materiel"/> ne possède pas de cercitifat de conformité</h3>
                            </t>
                        </div>
                    </t>
                </t>
            </t>
        </template>

        <report
            id="list_equipment"
            model="critt.equipment"
            string="Liste d'équipement(s)"
            report_type="qweb-pdf"
            name="certification.report_list_equipment"
            file="certification.report_list_equipment"
            menu="True"
            print_report_name='("Liste d&apos;équipement(s)")'
            attachment_use="False"
        />

        <report
            id="certif_creation"
            model="critt.equipment"
            string='Certificat "CE" de conformité'
            report_type="qweb-pdf"
            name="certification.report_certificat_creation"
            file="certification.report_certificat_creation"
            menu="True"
            print_report_name="('CE_conformite_' + object.num_materiel)"
            attachment_use="False"
        />

		<report
            id="last_certif_controle"
            model="critt.equipment"
            string="Dernier certificat de conformité"
            report_type="qweb-pdf"
            name="certification.report_last_certificat_conforme"
            file="certification.report_last_certificat_conforme"
            menu="True"
            print_report_name="('Controle_' + str(object.date_dernier_audit).split(' ', 1)[0] + '_' + object.num_materiel)"
            attachment_use="False"
        />

        <report
            id="certif_controle"
            model="critt.certification.audit"
            string="Certificat de conformité"
            report_type="qweb-pdf"
            name="certification.report_certificat_conforme"
            file="certification.report_certificat_conforme"
            menu="False"
        />

        <report
            id="certif_destruct"
            model="critt.equipment"
            string="Certificat de destruction"
            report_type="qweb-pdf"
            name="certification.report_certificat_destruction"
            file="certification.report_certificat_destruction"
            menu="True"
            print_report_name="('Destruction_' + object.num_materiel)"
            attachment_use="False"
        />

        <template id="report_certificat_destruction">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                        <link href="/certification/static/src/css/templates.css" rel="stylesheet" type="text/css"/>
                        <div class="page">
                            <t t-if="o.certif_destruction">
                                <div class="tableau-infos" style=" padding-top: 50px">
                                    <table style="border: 1px solid;">
                                        <tr>
                                            <th style="border: 1px solid; width: 50%; padding: 5px;"><b>DESTINATAIRE</b></th>
                                            <th style="border: 1px solid; width: 50%; padding: 5px;"><b>INFORMATIONS</b></th>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid; padding: 5px;">
                                                <t t-esc="o.res_partner_id.name"/>
                                                <br/>
                                                <t t-esc="o.res_partner_id.street"/>
                                                <t t-if="o.res_partner_id.street2">
                                                    <br/>
                                                    <t t-esc="o.res_partner_id.street2"/>
                                                </t>
                                                <br/>
                                                <t t-esc="o.res_partner_id.zip"/> <t t-esc="o.res_partner_id.city"/>
                                            </td>
                                            <td style="border: 1px solid; padding: 5px;">
                                                <p>
                                                    <b>DATE DERNIER AUDIT: </b><t t-esc="o.date_dernier_audit" t-options="{'widget': 'date'}"/>
                                                    <br/>
                                                    <b>DATE DE DESTRUCTION: </b><t t-esc="o.datetime_destruction" t-options="{'widget': 'date'}"/>
                                                    <!--<b>DATE DE CONTRÔLE: </b><t t-esc="o.date_dernier_audit" t-options="{'widget': 'date'}"/>
                                                    <br/>
                                                    <b>COMMANDE CLIENT N°: </b>
                                                    <br/>
                                                    <b>BON DE LIVRAISON N°: </b>-->
                                                </p>
                                            </td>
                                        </tr>
                                    </table>
                                    <br/>
                                </div>
                                <div class="corp-certif" style="text-align: center;">
                                    <h2 style="margin: 50px; text-align: center;"><u>DÉCLARATION DE DESTRUCTION</u></h2>
                                    <p style="margin: 50px;">
                                            Nous, soussignés, CAP LEVAGE, certifions que suivant la demande du destinataire le
                                            <br/>
                                            matériel ci-dessous présenté a été détruit le <t t-esc="o.datetime_destruction" t-options="{'widget': 'date'}"/>
                                    </p>
                                    <table class="infos_mat">
                                        <tr>
                                            <td style="border: 1px solid; padding: 5px;"><b>Type de matériel</b></td>
                                            <td><t t-esc="o.category_id.name"/></td>
                                        </tr>
                                        <tr>
                                            <td><b>Numéro de matériel</b></td>
                                            <td><t t-esc="o.num_materiel"/></td>
                                        </tr>
                                        <tr>
                                            <td><b>Date de mise en service</b></td>
                                            <td><t t-esc="o.an_mise_service" t-options="{'widget': 'date'}"/></td>
                                        </tr>
                                        <tr>
                                            <td><b>Fabricant</b></td>
                                            <td><t t-esc="o.fabricant_id.name"/></td>
                                        </tr>
                                        <tr>
                                            <td><b>Cœfficient de Sécurité</b></td>
                                            <td><t t-esc="o.category_id.coef_secu"/></td>
                                        </tr>
                                        <tr t-if="o.display_cmu">
                                            <td><b>CMU (T)</b></td>
                                            <td><t t-esc="o.cmu"/></td>
                                        </tr>
                                        <tr t-if="o.display_tmu">
                                            <td><b>TMU (daN)</b></td>
                                            <td><t t-esc="o.tmu"/></td>
                                        </tr>
                                        <tr t-if="o.display_nombre_brins">
                                            <td><b>Nombre de brins</b></td>
                                            <td><t t-esc="o.nombre_brins"/></td>
                                        </tr>
                                        <tr t-if="o.display_longueur">
                                            <td><b>Longueur (ml)</b></td>
                                            <td><t t-esc="o.longueur"/></td>
                                        </tr>
                                        <tr t-if="o.display_diametre">
                                            <td><b>Diamètre (mm)</b></td>
                                            <td><t t-esc="o.diametre"/></td>
                                        </tr>
                                        <tr t-if="o.display_grade">
                                            <td><b>Grade</b></td>
                                            <td><t t-esc="o.grade"/></td>
                                        </tr>
                                        <tr t-if="o.display_num_lot">
                                            <td><b>Numéro de lot</b></td>
                                            <td><t t-esc="o.num_lot"/></td>
                                        </tr>
                                        <tr t-if="o.display_num_commande">
                                            <td><b>Numéro de commande</b></td>
                                            <td><t t-esc="o.num_commande"/></td>
                                        </tr>
                                    </table>
                                </div>
                                <footer>
                                    <div style="margin-top: 50px;text-align:right;">
                                        <div style="font-weight:bold;">LE RESPONSABLE</div>
                                        <div style="font-weight:bold;">Laramée Kévin</div>
                                        <div>
                                            <img src="/certification/static/src/img/Signature.PNG" style="height: 90px; width: 210px;"/>
                                        </div>
                                    </div>
                                </footer>
                            </t>
                            <t t-else="">
                                <h3 style="text-align: center;">Le matériel numéro <t t-esc="o.num_materiel"/> ne possède pas de cercitifat de destruction</h3>
                            </t>
                        </div>
                    </t>
                </t>
            </t>
        </template>

        <template id="report_certificat_creation">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                        <link href="/certification/static/src/css/templates.css" rel="stylesheet" type="text/css"/>
                        <div class="page">
                            <t t-if="o.certif_creation">
                                <div class="tableau-infos" style=" padding-top: 50px">
                                    <table style="border: 1px solid;">
                                        <tr>
                                            <th style="border: 1px solid; width: 50%; padding: 5px;"><b>DESTINATAIRE</b></th>
                                            <th style="border: 1px solid; width: 50%; padding: 5px;"><b>INFORMATIONS</b></th>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid; padding: 5px;">
                                                <t t-esc="o.res_partner_id.name"/>
                                                <br/>
                                                <t t-esc="o.res_partner_id.street"/>
                                                <t t-if="o.res_partner_id.street2">
                                                    <br/>
                                                    <t t-esc="o.res_partner_id.street2"/>
                                                </t>
                                                <br/>
                                                <t t-esc="o.res_partner_id.zip"/> <t t-esc="o.res_partner_id.city"/>
                                            </td>
                                            <td style="border: 1px solid; padding: 5px;">
                                                <p>
                                                    <b>DATE MISE EN SERVICE: </b><t t-esc="o.an_mise_service" t-options="{'widget': 'date'}"/>
                                                    <br/>
                                                    <b>DATE PROCHAIN AUDIT: </b><t t-esc="o.audit_suivant" t-options="{'widget': 'date'}"/>
                                                    <!--<br/>
                                                    <b>FACTURE N°: </b>-->
                                                </p>
                                            </td>
                                        </tr>
                                    </table>
                                    <br/>
                                </div>
                                <div class="corp-certif" style="text-align: center;">
                                    <h2 style="margin: 50px; text-align: center;"><u>DÉCLARATION "CE" DE CONFORMITÉ</u></h2>
                                    <p style="margin: 50px;">
                                        Selon Directive 89:392/CEE, modifiée par 91/368, 93/94 et 93/68
                                        <br/>
                                        Directive européenne n°2006/42/CE nouvelle version 29 décembre 2009
                                        <br/>
                                        <br/>
                                        Nous, soussignés, CAP LEVAGE, certifions que le matériel ci-après est conforme:
                                    </p>
                                    <table class="infos_mat">
                                        <tr>
                                            <td style="border: 1px solid; padding: 5px;"><b>Type de matériel</b></td>
                                            <td><t t-esc="o.category_id.name"/></td>
                                        </tr>
                                        <tr>
                                            <td><b>Numéro de matériel</b></td>
                                            <td><t t-esc="o.num_materiel"/></td>
                                        </tr>
                                        <tr>
                                            <td><b>Date de fabrication</b></td>
                                            <td><t t-esc="o.date_fabrication" t-options="{'widget': 'date'}"/></td>
                                        </tr>
                                        <tr>
                                            <td><b>Fabricant</b></td>
                                            <td><t t-esc="o.fabricant_id.name"/></td>
                                        </tr>
                                        <tr>
                                            <td><b>Cœfficient de Sécurité</b></td>
                                            <td><t t-esc="o.category_id.coef_secu"/></td>
                                        </tr>
                                        <tr t-if="o.display_cmu">
                                            <td><b>CMU (T)</b></td>
                                            <td><t t-esc="o.cmu"/></td>
                                        </tr>
                                        <tr t-if="o.display_tmu">
                                            <td><b>TMU (daN)</b></td>
                                            <td><t t-esc="o.tmu"/></td>
                                        </tr>
                                        <tr t-if="o.display_nombre_brins">
                                            <td><b>Nombre de brins</b></td>
                                            <td><t t-esc="o.nombre_brins"/></td>
                                        </tr>
                                        <tr t-if="o.display_longueur">
                                            <td><b>Longueur (ml)</b></td>
                                            <td><t t-esc="o.longueur"/></td>
                                        </tr>
                                        <tr t-if="o.display_diametre">
                                            <td><b>Diamètre (mm)</b></td>
                                            <td><t t-esc="o.diametre"/></td>
                                        </tr>
                                        <tr t-if="o.display_grade">
                                            <td><b>Grade</b></td>
                                            <td><t t-esc="o.grade"/></td>
                                        </tr>
                                        <tr t-if="o.display_num_lot">
                                            <td><b>Numéro de lot</b></td>
                                            <td><t t-esc="o.num_lot"/></td>
                                        </tr>
                                        <tr t-if="o.display_num_commande">
                                            <td><b>Numéro de commande</b></td>
                                            <td><t t-esc="o.num_commande"/></td>
                                        </tr>
                                    </table>
                                </div>
                                <footer>
                                   <!-- <p style="background:red;margin-top: 75px">
                                        <b style="display:block;float:right;">LE RESPONSABLE</b>
                                        <br/>
                                        <p style="display:block;float:right;background:green;">Laramée Kévin</p>
                                        <br/>
                                        <img src="/certification/static/src/img/Signature.PNG" style="height: 50px; width: 100px;display:block;float:right;"/>
                                    </p>-->
                                    <div style="margin-top: 50px;text-align:right;">
                                        <div style="font-weight:bold;">LE RESPONSABLE</div>
                                        <div style="font-weight:bold;">Laramée Kévin</div>
                                        <div>
                                            <img src="/certification/static/src/img/Signature.PNG" style="height: 90px; width: 210px;"/>
                                        </div>
                                    </div>
                                </footer>
                            </t>
                            <t t-else="">
                                <h3 style="text-align: center;">Le matériel numéro <t t-esc="o.num_materiel"/> ne possède pas de cercitifat "CE" de conformité</h3>
                            </t>
                        </div>
                    </t>
                </t>
            </t>
        </template>

        <template id="mass_certificate_template">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                        <link href="/certification/static/src/css/templates.css" rel="stylesheet" type="text/css"/>
                        <t t-foreach="certificats" t-as="certificat">
                            <div class="page certificat">
                                <div class="tableau-infos" style=" padding-top: 50px">
                                    <table style="border: 1px solid;">
                                        <tr>
                                            <th style="border: 1px solid; width: 50%; padding: 5px;"><b>DESTINATAIRE</b></th>
                                            <th style="border: 1px solid; width: 50%; padding: 5px;"><b>INFORMATIONS</b></th>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid; padding: 5px;">
                                                <t t-esc="certificat.id_equipment.res_partner_id.name"/>
                                                <br/>
                                                <t t-esc="certificat.id_equipment.res_partner_id.street"/>
                                                <t t-if="certificat.id_equipment.res_partner_id.street2">
                                                    <br/>
                                                    <t t-esc="certificat.id_equipment.res_partner_id.street2"/>
                                                </t>
                                                <br/>
                                                <t t-esc="certificat.id_equipment.res_partner_id.zip"/> <t t-esc="certificat.id_equipment.res_partner_id.city"/>
                                            </td>
                                            <td style="border: 1px solid; padding: 5px;">
                                                <p>
                                                    <t t-if="certificat.type == 'creation'">
                                                        <b>DATE MISE EN SERVICE: </b><t t-esc="certificat.id_equipment.an_mise_service" t-options="{'widget': 'date'}"/>
                                                        <br/>
                                                    </t>
                                                    <t t-else="">
                                                        <b>DATE DERNIER AUDIT: </b><t t-esc="certificat.id_equipment.date_dernier_audit" t-options="{'widget': 'date'}"/>
                                                        <br/>
                                                    </t>
                                                    <b>DATE PROCHAIN AUDIT: </b><t t-esc="certificat.id_equipment.audit_suivant" t-options="{'widget': 'date'}"/>
                                                    <!--<br/>
                                                    <b>FACTURE N°: </b>-->
                                                </p>
                                            </td>
                                        </tr>
                                    </table>
                                    <br/>
                                </div>
                                <div class="corp-certif" style="text-align: center;">
                                    <t t-if="certificat.type == 'creation'">
                                        <h2 style="margin: 50px; text-align: center;"><u>DÉCLARATION "CE" DE CONFORMITÉ</u></h2>
                                        <p style="margin: 50px;">
                                            Selon Directive 89:392/CEE, modifiée par 91/368, 93/94 et 93/68
                                            <br/>
                                            Directive européenne n°2006/42/CE nouvelle version 29 décembre 2009
                                            <br/>
                                            <br/>
                                            Nous, soussignés, CAP LEVAGE, certifions que le matériel ci-après est conforme:
                                        </p>
                                    </t>
                                    <t t-elif="certificat.type == 'controle'">
                                        <h2 style="margin: 50px; text-align: center;"><u>DÉCLARATION DE CONFORMITÉ</u></h2>
                                        <p style="margin: 50px;">
                                            Selon Directive 89:392/CEE, modifiée par 91/368, 93/94 et 93/68
                                            <br/>
                                            <br/>
                                            Nous, soussignés, CAP LEVAGE, certifions que le matériel est conforme jusqu'à la date du prochain audit
                                        </p>
                                    </t>
                                    <t t-else="">
                                        <h2 style="margin: 50px; text-align: center;"><u>DÉCLARATION DE DESTRUCTION</u></h2>
                                        <p style="margin: 50px;">
                                            Nous, soussignés, CAP LEVAGE, certifions que suivant la demande du destinataire le
                                            <br/>
                                            matériel ci-dessous présenté a été détruit le <t t-esc="certificat.id_equipment.datetime_destruction" t-options="{'widget': 'date'}"/>
                                        </p>
                                    </t>
                                    <table class="infos_mat">
                                        <tr>
                                            <td style="border: 1px solid; padding: 5px;"><b>Type de matériel</b></td>
                                            <td><t t-esc="certificat.id_equipment.category_id.name"/></td>
                                        </tr>
                                        <tr>
                                            <td><b>Numéro de matériel</b></td>
                                            <td><t t-esc="certificat.id_equipment.num_materiel"/></td>
                                        </tr>
                                        <tr>
                                            <td><b>Date de fabrication</b></td>
                                            <td><t t-esc="certificat.id_equipment.date_fabrication" t-options="{'widget': 'date'}"/></td>
                                        </tr>
                                        <tr>
                                            <td><b>Fabricant</b></td>
                                            <td><t t-esc="certificat.id_equipment.fabricant_id.name"/></td>
                                        </tr>
                                        <tr>
                                            <td><b>Cœfficient de Sécurité</b></td>
                                            <td><t t-esc="certificat.id_equipment.category_id.coef_secu"/></td>
                                        </tr>
                                        <tr t-if="certificat.id_equipment.display_cmu">
                                            <td><b>CMU (T)</b></td>
                                            <td><t t-esc="certificat.id_equipment.cmu"/></td>
                                        </tr>
                                        <tr t-if="certificat.id_equipment.display_tmu">
                                            <td><b>TMU (daN)</b></td>
                                            <td><t t-esc="certificat.id_equipment.tmu"/></td>
                                        </tr>
                                        <tr t-if="certificat.id_equipment.display_nombre_brins">
                                            <td><b>Nombre de brins</b></td>
                                            <td><t t-esc="certificat.id_equipment.nombre_brins"/></td>
                                        </tr>
                                        <tr t-if="certificat.id_equipment.display_longueur">
                                            <td><b>Longueur (ml)</b></td>
                                            <td><t t-esc="certificat.id_equipment.longueur"/></td>
                                        </tr>
                                        <tr t-if="certificat.id_equipment.display_diametre">
                                            <td><b>Diamètre (mm)</b></td>
                                            <td><t t-esc="certificat.id_equipment.diametre"/></td>
                                        </tr>
                                        <tr t-if="certificat.id_equipment.display_grade">
                                            <td><b>Grade</b></td>
                                            <td><t t-esc="certificat.id_equipment.grade"/></td>
                                        </tr>
                                        <tr t-if="certificat.id_equipment.display_num_lot">
                                            <td><b>Numéro de lot</b></td>
                                            <td><t t-esc="certificat.id_equipment.num_lot"/></td>
                                        </tr>
                                        <tr t-if="certificat.id_equipment.display_num_commande">
                                            <td><b>Numéro de commande</b></td>
                                            <td><t t-esc="certificat.id_equipment.num_commande"/></td>
                                        </tr>
                                    </table>
                                </div>
                                <footer>
                                    <!-- <p style="background:red;margin-top: 75px">
                                         <b style="display:block;float:right;">LE RESPONSABLE</b>
                                         <br/>
                                         <p style="display:block;float:right;background:green;">Laramée Kévin</p>
                                         <br/>
                                         <img src="/certification/static/src/img/Signature.PNG" style="height: 50px; width: 100px;display:block;float:right;"/>
                                     </p>-->
                                    <div style="margin-top: 50px;text-align:right;">
                                        <div style="font-weight:bold;">LE RESPONSABLE</div>
                                        <div style="font-weight:bold;">Laramée Kévin</div>
                                        <div>
                                            <img src="/certification/static/src/img/Signature.PNG" style="height: 90px; width: 210px;"/>
                                        </div>
                                    </div>
                                </footer>
                            </div>
                        </t>
                    </t>
                </t>
            </t>
        </template>

        <report
            id="custom_template_5"
            model="critt.certification.print_mass_certificate"
            string="Certificats"
            report_type="qweb-pdf"
            name="certification.mass_certificate_template"
            file="certification.mass_certificate_template"
            menu="False"/>

        <template id="report_controle_template">
            <t t-call="web.html_container">
                <t t-foreach="datas" t-as="data">
                    <t t-call="web.internal_layout">
                        <link href="/certification/static/src/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
                        <link href="/certification/static/src/css/templates.css" rel="stylesheet" type="text/css" />
                        <div class="header">
                            <div class="row">
                                <div class="col-3 mb4">
                                    <img t-if="cap_levage.image_1920" t-att-src="image_data_uri(cap_levage.image_1920)" style="max-height: 45px;" alt="Logo"/>
                                </div>
                                <div class="col-9 text-right" style="margin-top:22px;">
                                    <h4 style="text-align: right;">VGP<t t-esc="docs[0].id"/></h4>
                                </div>
                            </div>
                            <div style="width:450;background:black;height:1px;"/>
                            <div class="row">
                                <div class="col-6" name="company_address">
                                    <!--<div t-field="cap_levage.id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: true}"/>-->
                                    <t t-esc="cap_levage.name"/>
                                    <br/>
                                    <t t-esc="cap_levage.street"/>
                                    <br/>
                                    <t t-esc="cap_levage.zip"/> <t t-esc="cap_levage.city"/>
                                </div>
                            </div>
                        </div>
                        <div class="page">
                            <header>
                                <p style="text-align: right;">
                                    <t t-esc="client.name"/>
                                    <br/>
                                    <t t-esc="client.street"/>
                                    <t t-if="client.street2">
                                        <br/>
                                        <t t-esc="client.street2"/>
                                    </t>
                                    <br/>
                                    <t t-esc="client.zip"/> <t t-esc="client.city"/>
                                </p>
                            </header>
                            <body>
                                <div class="equipment">
                                    <h2 style="text-align: center;"><u>RAPPORT DE VGP Arrêté du 01 mars 2004</u></h2>
                                    <p style="text-align: left;">
                                        Est considéré comme accessoire de levage, tout équipement non incorporé à
                                        une machine, et en particulier un appareil de levage, et placer entre cette
                                        machine et la charge ou sur la charge pour permettre sa préhension
                                        ( exemple : elingue de levage, palonnier, pince auto serrante, …).
                                        <br/>
                                        <br/>
                                        Vérification périodique incluant, état de conservation, la visite ne
                                        comprend l’examen de l’état de conformité de règles de conception.
                                    </p>
                                    <br/>
                                    <div style="width:450;background:black;height:1px;"/>
                                    <div class="row corps">
                                        <h4 style="text-align: left;"><b>Infos matériel:</b></h4>

                                    </div>
                                    <div class="row infos_materiel">

                                        <div class="col-xs-3">
                                            <p><b>Numéro: </b><t t-esc="data['equipment'].num_materiel"/></p>
                                            <p><b>Type: </b><t t-esc="data['equipment'].category_id.name"/></p>
                                            <p><b>Fabricant: </b><t t-esc="data['equipment'].fabricant_id.name"/></p>
                                            <t t-if="data['equipment'].cmu">
                                                <p><b>CMU: </b><t t-esc="data['equipment'].cmu"/> tonne(s)</p>
                                            </t>
                                        </div>

                                        <div class="dates_et_etat col-xs-5">
                                            <p><b>Date de fabrication: </b><t t-esc="data['equipment'].create_date" t-options="{'widget': 'date'}"/></p>
                                            <p><b>Date du dernier contrôle: </b><t t-esc="data['equipment'].date_dernier_audit" t-options="{'widget': 'date'}"/></p>
                                            <p class="etat"><b>Etat: </b>
                                                <span t-if="data['equipment'].statut == 'ok'" t-esc="data['equipment'].statut_libelle" class="ok"/>
                                                <span t-if="data['equipment'].statut == 'en_cours'" t-esc="data['equipment'].statut_libelle" class="en_cours"/>
                                                <span t-if="data['equipment'].statut == 'bloque'" t-esc="data['equipment'].statut_libelle" class="bloque"/>
                                                <span t-if="data['equipment'].statut == 'reforme'" t-esc="data['equipment'].statut_libelle" class="reforme"/>
                                                <span t-if="data['equipment'].statut == 'detruit'" t-esc="data['equipment'].statut_libelle" class="reforme"/>
                                            </p>
                                        </div>
                                        <div class="equipment_img col-xs-4">
                                            <!-- <span t-field="data['equipment'].image_medium" t-field-options="{'widget': 'image'}"/>-->
                                            <!-- data:image/jpeg;base64 -->
                                            <img class="img_mat"
                                                 t-if="data['equipment'].image_medium"
                                                 t-att-src="image_data_uri(data['equipment'].image_medium)"/>
                                        </div>
                                    </div>
                                    <div style="width:450;background:black;height:1px;"/>
                                    <br/>
                                    <t t-if="data['reponses']">
                                        <div class="diagnostic row">
                                            <div class="question">
                                                <t t-foreach="data['reponses']" t-as="reponse">
                                                    <t t-set="prefix" t-value="'%s_%s' % (data['audit'].questionnaire.id, reponse.id_question)"/>
                                                    <div class="col-xs-12" style="margin-top:2px;">
                                                        <div class="col-xs-6">

                                                            <div class="col-xs-12">
                                                                <label><t t-esc="reponse.id_question.question"/>:</label>
                                                            </div>
                                                            <div class="reponses col-xs-12">
                                                                <t t-if="reponse.reponse == 1">
                                                                    <span>Oui</span> <span class="reponse-icon oui"/>
                                                                    <span>Non</span> <span class="reponse-icon"/>
                                                                    <!--<img src="/certification/static/src/img/sign-check-icon.png" alt="Icône valide"
                                                                         width="40px"/>-->
                                                                </t>
                                                                <t t-elif="reponse.reponse == 2">
                                                                    <span>Oui</span> <span class="reponse-icon"/>
                                                                    <span>Non</span> <span class="reponse-icon non"/>
                                                                    <!--<img src="/certification/static/src/img/sign-error-icon.png" alt="Icône erreur"
                                                                         width="40px"/>-->
                                                                </t>
                                                                <t t-else="">
                                                                    <span>Oui</span> <span class="reponse-icon"/>
                                                                    <span>Non</span> <span class="reponse-icon"/>
                                                                </t>
                                                            </div>

                                                        </div>
                                                        <div class="observation col-xs-6">
                                                            <label>Observation: </label>
                                                            <div class="commentaire">
                                                                <t t-esc="reponse.commentaire"></t>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </t>
                                            </div>
                                        </div>
                                        <div style="width:450;background:black;height:1px;"/>
                                        <br/>
                                        <div class="observation_generale col-xs-12">
                                            <label><b><u>Observation générale:</u></b></label>
                                            <div t-esc="data['equipment'].last_general_observation"/>
                                        </div>
                                    </t>
                                    <t t-else="" class="row">
                                        <h3 class="text-center">Aucun contrôle n'a été réalisé sur ce matériel</h3>
                                    </t>
                                </div>
                            </body>
                            <!--<separator/>-->
                            <div class="footer o_standard_footer text-muted">
                                <div style="width:450;background:black;height:1px;"/>
                                <div class="text-center">
                                    <div class="row">
                                        <div class="col-4">
                                            <b>Contrôleur:</b>
                                            <br/>
                                            <t t-if="data['controleur']">
                                                <t t-esc="data['controleur'].name"/>
                                            </t>
                                            <t t-else="">
                                                Aucun
                                            </t>
                                        </div>
                                        <div class="col-4">
                                            <b>Date:</b>
                                            <br/>
                                            <t t-esc="date"/>
                                        </div>
                                        <div class="col-4"> <!--t-if="data_last"-->
                                            <b>Signature:</b>
                                            <br/>
                                            <t t-if="data['controleur']">
                                                <img t-if="data['controleur'].signature"
                                                 t-att-src="image_data_uri(data['controleur'].signature)"
                                                 style="height: 60px; width: 140px"/>
                                            </t>
                                            <t t-else="">
                                                Aucune
                                            </t>

                                        </div>
                                    </div>
                                    <div class="text-muted">
                                        Page: <span class="page"/> / <span class="topage"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
        </template>

        <report
            id="custom_template_3"
            model="critt.certification.rapport_controle"
            string="Rapport de VGP"
            report_type="qweb-pdf"
            name="certification.report_controle_template"
            file="certification.report_controle_template"
            menu="False"
        />
    </data>
</odoo>